# üì¶ PostingFotoTG

AI-–ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ **—Ñ–æ—Ç–æ–æ—Ç—á—ë—Ç–æ–≤ –∏–∑ Bitrix24 –≤ Telegram**.

---

## üß© –°—Ç–µ–∫ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π:
- **FastAPI** ‚Äî Backend
- **Bitrix24 REST API** ‚Äî –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫
- **Telegram Bot API** ‚Äî –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ
- **OpenAI GPT-3.5/4.0** ‚Äî –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–µ–π
- **Render.com** ‚Äî –•–æ—Å—Ç–∏–Ω–≥ –∏ –¥–µ–ø–ª–æ–π
- **GitHub** ‚Äî –û—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: [PostingFotoTG](https://github.com/maslovmaksim92/PostingFotoTG)

---

## üöÄ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:

### üîî –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–æ–≤:

```http
POST /webhook/register_folder
{
  "deal_id": 12345,
  "folder_id": 199058
}
```

---

### üì§ –ó–∞–≥—Ä—É–∑–∫–∞ –∏ –ø—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤:

- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∫–∞ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ `disk.folder.getchildren` –∏–∑ Bitrix24.
- –°–∫–∞—á–∏–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –ø–æ `DOWNLOAD_URL`.
- –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–æ–≤ —á–µ—Ä–µ–∑ **GPT-3.5** (—Å fallback –Ω–∞ —à–∞–±–ª–æ–Ω–Ω—ã–π —Ç–µ–∫—Å—Ç).
- –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ –ø–∞–ø–∫—É —Å–¥–µ–ª–∫–∏ —á–µ—Ä–µ–∑ `disk.folder.uploadfile` **–¥–≤—É—Ö—ç—Ç–∞–ø–Ω–æ–π —Å—Ö–µ–º–æ–π**:
  - 1. –ü–æ–ª—É—á–µ–Ω–∏–µ `uploadUrl`.
  - 2. –ü—Ä—è–º–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–∞–π–ª–∞ –Ω–∞ `uploadUrl`.
- –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ ID –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤ –≤ —Å–¥–µ–ª–∫—É —á–µ—Ä–µ–∑ `crm.deal.update`.
- –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ–æ—Ç—á—ë—Ç–∞ –≤ Telegram —á–µ—Ä–µ–∑ `sendMediaGroup`, –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–µ—Ä–≤–æ–µ —Ñ–æ—Ç–æ.

---

## üìú –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è —Å–¥–µ–ª–∫–∏:

| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ             | –ö–æ–¥ –ø–æ–ª—è Bitrix24                 |
|-------------------------|------------------------------------|
| –ü–∞–ø–∫–∞ —Å —Ñ–æ—Ç–æ            | `UF_CRM_1743273170850`             |
| –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤     | `UF_CRM_1740994275251`             |
| –ê–¥—Ä–µ—Å –æ–±—ä–µ–∫—Ç–∞           | `UF_CRM_1669561599956`             |
| –ë—Ä–∏–≥–∞–¥–∞ (ID —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–≤) | `UF_CRM_1741590925181`             |

---

## ‚öôÔ∏è –ü—Ä–æ–º—Ç GPT (–õ–æ–≥–∏–∫–∞ FotoTG):

```markdown
{–ü–µ—Ä–µ–¥ –∫–∞–∂–¥—ã–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º —Ç—ã –≤—Å—ë —á–∏—Ç–∞–µ—à—å README –∏ –Ω–µ –æ—Ç—Ö–æ–¥–∏—à—å –æ—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –ø—Ä–æ–µ–∫—Ç–∞ https://github.com/maslovmaksim92/PostingFotoTG/blob/main/README.md

–¢—ã ‚Äî AI-–ø–æ–º–æ—â–Ω–∏–∫ –ø—Ä–æ–µ–∫—Ç–∞ PostingFotoTG, –ø—Ä–µ–¥–Ω–∞–∑–Ω–∞—á–µ–Ω–Ω–æ–≥–æ –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ç–æ–æ—Ç—á—ë—Ç–æ–≤ –∏–∑ Bitrix24 –≤ Telegram.

–¢—ã —Ä–∞–±–æ—Ç–∞–µ—à—å —Å:
- FastAPI (–æ—Å–Ω–æ–≤–Ω–æ–π backend),
- Bitrix24 (–ø–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –æ —Å–¥–µ–ª–∫–µ, —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ —Å –¥–∏—Å–∫–∞),
- Telegram Bot API (–æ—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ),
- OpenAI GPT-3.5 (–≥–µ–Ω–µ—Ä–∞—Ü–∏—è –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏—Ö —Å–æ–æ–±—â–µ–Ω–∏–π),
- Render (—Ö–æ—Å—Ç–∏–Ω–≥ –∏ –¥–µ–ø–ª–æ–π),
- GitHub (–æ—Å–Ω–æ–≤–Ω–æ–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π: https://github.com/maslovmaksim92/PostingFotoTG).

üéØ –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏:
- –ü–æ–ª—É—á–∞—Ç—å –≤–µ–±—Ö—É–∫–∏ –æ—Ç Bitrix.
- –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ñ–æ—Ç–æ –∏ –≤–∏–¥–µ–æ –ø–æ –ø–∞–ø–∫–µ —Å–¥–µ–ª–∫–∏.
- –ü—Ä–∏–∫—Ä–µ–ø–ª—è—Ç—å –º–µ–¥–∏–∞ –∫ —Å–¥–µ–ª–∫–µ —á–µ—Ä–µ–∑ Bitrix API.
- –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ—Ä–æ—Ç–∫–∏–π —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π —Ç–µ–∫—Å—Ç —á–µ—Ä–µ–∑ GPT:
  - —ç–º–æ—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π,
  - —Å bait –Ω–∞ –æ—Ç–∑—ã–≤—ã,
  - –ø–æ–¥—á—ë—Ä–∫–∏–≤–∞—é—â–∏–π —á–∏—Å—Ç–æ—Ç—É, –ø–æ–ª—å–∑—É –∏ —Å–æ—Ü–∏–∞–ª—å–Ω—É—é –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å.
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ñ–æ—Ç–æ –≤ Telegram —á–µ—Ä–µ–∑ sendMediaGroup.
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å fallback —Ç–µ–∫—Å—Ç –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ GPT.

üß† –ü—Ä–∞–≤–∏–ª–∞:
- –†–∞–±–æ—Ç–∞—Ç—å —Å—Ç—Ä–æ–≥–æ –≤ —Ä–∞–º–∫–∞—Ö –æ–¥–Ω–æ–≥–æ –ø—Ä–æ–µ–∫—Ç–∞ ‚Äî PostingFotoTG.
- –ù–µ —Å–º–µ—à–∏–≤–∞—Ç—å –ª–æ–≥–∏–∫—É Telegram, GPT –∏ Bitrix –≤ –æ–¥–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–∏.
- –í—Å–µ–≥–¥–∞ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å .env, –±–µ–∑ —Ö–∞—Ä–¥–∫–æ–¥–∞ –∫–ª—é—á–µ–π.
- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å –≤—Å—ë –Ω–∞ —Ä—É—Å—Å–∫–æ–º, –æ—à–∏–±–∫–∏ –≤—ã–¥–µ–ª—è—Ç—å –∂–∏—Ä–Ω–æ.
- –ù–∏–∫–∞–∫–∏—Ö –≤—ã–¥—É–º–∞–Ω–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö.

üí¨ –ù–∞—á–∞–ª–æ –æ–±—Å—É–∂–¥–µ–Ω–∏—è:
–ü—Ä–∏–≤–µ—Ç! –Ø FotoTG ‚Äî AI-–ø–æ–º–æ—â–Ω–∏–∫ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ç–æ–æ—Ç—á—ë—Ç–æ–≤ –∏–∑ Bitrix24 –≤ Telegram. –ì–æ—Ç–æ–≤ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—Ç—å —Å–¥–µ–ª–∫–∏, –ø—Ä–∏–∫—Ä–µ–ø–ª—è—Ç—å —Ñ–æ—Ç–æ –∏ –ø–∏—Å–∞—Ç—å –≤–¥–æ—Ö–Ω–æ–≤–ª—è—é—â–∏–µ —Å–æ–æ–±—â–µ–Ω–∏—è üí¨üßπ

–¢–≤–æ—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å–æ–æ–±—â–µ–Ω–∏–π:
1. –ß—Ç–æ —Å–¥–µ–ª–∞–Ω–æ ‚úÖ
2. –ß–µ–∫-–ª–∏—Å—Ç —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞ —Å –∏–∑–º–µ–Ω–µ–Ω–∏—è–º–∏
3. –ë–ª–∏–∂–∞–π—à–∞—è —Ü–µ–ª—å üîú, —Å–ª–µ–¥—É—é—â–∞—è üéØ –∏ —Ñ–∏–Ω–∞–ª—å–Ω–∞—è üèÅ
4. –ü–ª–∞–Ω–∏—Ä—É–µ–º—ã–µ –ø—É—à–∏ –Ω–∞ 3 —à–∞–≥–∞ –≤–ø–µ—Ä–µ–¥
}
```

---

## üìã –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞:

| –§–∞–π–ª                          | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ                                         | –°—Ç—Ä–æ–∫ –±—ã–ª–æ | –°—Ç—Ä–æ–∫ —Å—Ç–∞–ª–æ | –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π |
|-------------------------------|----------------------------------------------------|------------|-------------|-------------|
| `app.py`                      | FastAPI backend                                    | 105        | 105         | –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| `bitrix.py`                   | –†–∞–±–æ—Ç–∞ —Å API Bitrix: —Å–¥–µ–ª–∫–∏ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤      | 250        | 250         | –æ–±–Ω–æ–≤–ª–µ–Ω–æ |
| `bitrix_upload.py`             | –ù–æ–≤–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ —á–µ—Ä–µ–∑ `fileContent`          | 60         | 60          | –Ω–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ |
| `services.py`                  | –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –ª–æ–≥–∏–∫–∏ –∑–∞–≥—Ä—É–∑–∫–∏                        | 35         | 40          | –∏–º–ø–æ—Ä—Ç –Ω–æ–≤–æ–π —Ñ—É–Ω–∫—Ü–∏–∏ |
| `telegram.py`                  | –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ –≥—Ä—É–ø–ø–æ–π –≤ Telegram                  | 90         | 90          | –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| `gpt.py`                       | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏ —á–µ—Ä–µ–∑ OpenAI                    | 75         | 75          | –æ–±–Ω–æ–≤–ª–µ–Ω–æ –ø–æ–¥ OpenAI 1.75.0 |
| `webhook.py`                   | –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤–µ–±—Ö—É–∫–æ–≤ Bitrix                         | 115        | 115         | –∞–¥–∞–ø—Ç–∞—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ |
| `utils/*.py`                   | –£—Ç–∏–ª–∏—Ç—ã: —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ, –ø—Ä–æ–º—Ç—ã, fallback          | 350        | 350         | –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| `README.md`                    | –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞                              | 120        | 180         | –ø–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω |
| `requirements.txt`             | –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏                                       | 15         | 15          | –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| `.env.example`                 | –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è                       | 12         | 12          | –±–µ–∑ –∏–∑–º–µ–Ω–µ–Ω–∏–π |
| `checklist.txt`                | –ß–µ–∫-–ª–∏—Å—Ç —Ñ–∞–π–ª–æ–≤ –ø—Ä–æ–µ–∫—Ç–∞                           | 45         | 45          | –¥–æ–±–∞–≤–ª–µ–Ω |

---

## üî• –°—Ç–∞—Ç—É—Å –ø—Ä–æ–µ–∫—Ç–∞:

- –§–æ—Ç–æ –ø—Ä–∏—Ö–æ–¥—è—Ç –∏–∑ Bitrix ‚úÖ
- –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ –∫ —Å–¥–µ–ª–∫–µ —Ä–∞–±–æ—Ç–∞–µ—Ç ‚úÖ
- –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram —á–µ—Ä–µ–∑ sendMediaGroup ‚úÖ
- –ü–æ–¥–ø–∏—Å—å –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è —á–µ—Ä–µ–∑ GPT –∏–ª–∏ fallback ‚úÖ
- –ü–æ–ª–Ω–æ—Å—Ç—å—é –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–Ω üöÄ

---