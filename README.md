## üì¶ –ü—Ä–æ–µ–∫—Ç PostingFotoTG

PostingFotoTG ‚Äî —ç—Ç–æ —Å–µ—Ä–≤–∏—Å –¥–ª—è **–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ —Ñ–æ—Ç–æ–æ—Ç—á—ë—Ç–æ–≤ –∏–∑ Bitrix24 –≤ Telegram** –ø–æ—Å–ª–µ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è —É–±–æ—Ä–∫–∏.

---

## üß© –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏:

- **FastAPI** ‚Äî –±—ç–∫–µ–Ω–¥
- **Bitrix24 API** ‚Äî –ø–æ–ª—É—á–µ–Ω–∏–µ —Å–¥–µ–ª–æ–∫, –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤
- **Telegram Bot API** ‚Äî –æ—Ç–ø—Ä–∞–≤–∫–∞ –º–µ–¥–∏–∞
- **OpenAI GPT-4** ‚Äî –≥–µ–Ω–µ—Ä–∞—Ü–∏—è –∫–æ—Ä–æ—Ç–∫–∏—Ö –ø–æ–¥–ø–∏—Å–µ–π
- **Render** ‚Äî –¥–µ–ø–ª–æ–π
- **GitHub** ‚Äî –∫–æ–¥ –∏ CI

---

## üöÄ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ—Ä–≤–∏—Å:

### üîî –ü–æ–ª—É—á–µ–Ω–∏–µ –≤–µ–±—Ö—É–∫–æ–≤:

```http
POST /webhook/register_folder
{
  "deal_id": 12345,
  "folder_id": 199058
}
```
- –ü—Ä–∏—Ö–æ–¥–∏—Ç ID —Å–¥–µ–ª–∫–∏ –∏ ID –ø–∞–ø–∫–∏ —Å —Ñ–æ—Ç–æ.

### üì• –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤:

1. –°–∫–∞—á–∏–≤–∞–µ–º —Å–ø–∏—Å–æ–∫ —Ñ–∞–π–ª–æ–≤ –∏–∑ –ø–∞–ø–∫–∏ —á–µ—Ä–µ–∑ `disk.folder.getchildren`
2. –î–ª—è –∫–∞–∂–¥–æ–≥–æ —Ñ–∞–π–ª–∞:
   - –°–∫–∞—á–∏–≤–∞–µ–º —Ñ–∞–π–ª –≤—Ä–µ–º–µ–Ω–Ω–æ.
   - –ò–Ω–∏—Ü–∏–∏—Ä—É–µ–º –ø—Ä—è–º—É—é –∑–∞–≥—Ä—É–∑–∫—É —á–µ—Ä–µ–∑ `disk.folder.uploadfile`
   - –ü—Ä–∏–∫—Ä–µ–ø–ª—è–µ–º —Ñ–∞–π–ª –∫ —Å–¥–µ–ª–∫–µ –≤ –ø–æ–ª–µ `UF_CRM_1740994275251`

### üßπ –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–µ–π:

- –ó–∞–ø—Ä–æ—Å –≤ GPT-4 —Å —Ç–µ–º–æ–π "—É–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞", –∞–∫—Ü–µ–Ω—Ç –Ω–∞ —á–∏—Å—Ç–æ—Ç—É, –ø–æ–ª—å–∑—É –∏ –æ—Ç–∑—ã–≤—ã.
- –ï—Å–ª–∏ GPT –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω ‚Äî –∏—Å–ø–æ–ª—å–∑—É–µ–º fallback —Ç–µ–∫—Å—Ç:
  > "–£–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞. –°–ø–∞—Å–∏–±–æ –∑–∞ —á–∏—Å—Ç–æ—Ç—É üßπ"

### üì§ –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ Telegram:

- –§–æ—Ç–æ (–¥–æ 10 —à—Ç—É–∫) ‚Äî –æ–¥–Ω–∏–º —Å–æ–æ–±—â–µ–Ω–∏–µ–º —á–µ—Ä–µ–∑ `sendMediaGroup`
- –í–∏–¥–µ–æ ‚Äî –æ—Ç–¥–µ–ª—å–Ω–æ —á–µ—Ä–µ–∑ `sendVideo`
- –ü–µ—Ä–≤–∞—è –ø–æ–¥–ø–∏—Å—å —Å–æ–¥–µ—Ä–∂–∏—Ç –∞–¥—Ä–µ—Å –æ–±—ä–µ–∫—Ç–∞.

### üìã –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:

- –í—Å–µ —ç—Ç–∞–ø—ã —Ä–∞–±–æ—Ç—ã –ª–æ–≥–∏—Ä—É—é—Ç—Å—è —á–µ—Ä–µ–∑ `loguru`
- –û—à–∏–±–∫–∏ –≤—ã–¥–µ–ª—è—é—Ç—Å—è –∂–∏—Ä–Ω–æ ‚ö°

---

## üì¶ –ò—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –ø–æ–ª—è –≤ —Å–¥–µ–ª–∫–µ Bitrix24:

| –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ        | –ü–æ–ª–µ Bitrix24             |
|-------------------|----------------------------|
| –ü–∞–ø–∫–∞ —Å —Ñ–æ—Ç–æ      | `UF_CRM_1743273170850`      |
| –ü—Ä–∏–∫—Ä–µ–ø–ª–µ–Ω–∏–µ —Ñ–æ—Ç–æ | `UF_CRM_1740994275251`      |
| –ê–¥—Ä–µ—Å –æ–±—ä–µ–∫—Ç–∞     | `UF_CRM_1669561599956`      |
| –ë—Ä–∏–≥–∞–¥–∞           | `UF_CRM_1741590925181`      |

---

## üõ† –û—Å–Ω–æ–≤–Ω—ã–µ —Ñ—É–Ω–∫—Ü–∏–∏ –ø—Ä–æ–µ–∫—Ç–∞:

| –§—É–Ω–∫—Ü–∏—è                            | –§–∞–π–ª              | –û–ø–∏—Å–∞–Ω–∏–µ |
|------------------------------------|-------------------|----------|
| –ü—Ä–∏—ë–º –≤–µ–±—Ö—É–∫–∞ –æ—Ç Bitrix            | `webhook.py`      | –ü—Ä–∏–Ω–∏–º–∞–µ–º `deal_id` –∏ `folder_id`, –∑–∞–ø—É—Å–∫–∞–µ–º –æ—Ç—á—ë—Ç |
| –°–±–æ—Ä–∫–∞ –º–µ–¥–∏–∞ –∏–∑ –ø–∞–ø–∫–∏              | `services.py`     | –ü–æ–ª—É—á–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∏ —Ñ–æ—Ä–º–∏—Ä–æ–≤–∞–Ω–∏–µ media_group |
| –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –ø–æ–¥–ø–∏—Å–∏ —á–µ—Ä–µ–∑ GPT        | `gpt.py`          | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ–∫—Å—Ç–∞ –¥–ª—è Telegram |
| –ó–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –∫ —Å–¥–µ–ª–∫–µ           | `bitrix_upload.py`| –ü—Ä—è–º–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —Ñ–∞–π–ª–æ–≤ –≤ —Å–¥–µ–ª–∫—É —á–µ—Ä–µ–∑ uploadUrl |
| –û—Ç–ø—Ä–∞–≤–∫–∞ —Ñ–æ—Ç–æ/–≤–∏–¥–µ–æ –≤ Telegram     | `telegram.py`     | –û—Ç–ø—Ä–∞–≤–∫–∞ –≤ –∫–∞–Ω–∞–ª –æ—Ç—á—ë—Ç–æ–≤ |
| –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Å–æ–±—ã—Ç–∏–π                | `logs/uploader.log`| –í—Å–µ —à–∞–≥–∏: —É—Å–ø–µ—Ö–∏ –∏ –æ—à–∏–±–∫–∏ |

---

## üéØ –¶–µ–ª–∏ –±–ª–∏–∂–∞–π—à–∏—Ö –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π:

- –£–ª—É—á—à–µ–Ω–∏–µ –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
- –î–æ–±–∞–≤–ª–µ–Ω–∏–µ retries –ø—Ä–∏ –æ—à–∏–±–∫–µ 400
- –õ–æ–≥ —É—Å–ø–µ—à–Ω–æ–π/–Ω–µ—É—Å–ø–µ—à–Ω–æ–π –∑–∞–≥—Ä—É–∑–∫–∏ –ø–æ –∫–∞–∂–¥–æ–º—É —Ñ–∞–π–ª—É
- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ—Ç—á—ë—Ç–æ–≤ –≤–Ω—É—Ç—Ä–∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏—è —Å–¥–µ–ª–∫–∏

---

‚úÖ –ê–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –ø—Ä–æ–µ–∫—Ç–∞ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –ø–æ–ª–Ω—É—é –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—é –æ—Ç—á—ë—Ç–æ–≤ –±–µ–∑ —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏!